<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Registration</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="sjpssfbc.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'spin-slow': 'spin 2s linear infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-700" oncontextmenu="return false;" onkeydown="if(event.keyCode==123) return false;" >
    <div class="min-h-screen p-4 md:p-6 lg:p-8">
        <div class="max-w-7xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden animate-fade-in">
           
	 <!-- Header -->
<div class="bg-gradient-to-r from-slate-800 via-blue-600 to-blue-700 text-white p-6 md:p-8 lg:p-12">
   <div class="text-center">
       <div class="flex items-center justify-between mb-3 md:mb-4">
           <a href="adminPanel.html#vendors" class="group inline-flex items-center px-4 py-2 text-sm font-medium text-blue-100 bg-white/10 border border-white/20 rounded-lg hover:bg-white/20 hover:text-white transition-all duration-200 backdrop-blur-sm">
               <svg class="w-4 h-4 mr-2 transition-transform duration-200 group-hover:-translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
               </svg>
               <span>Admin Panel</span>
           </a>
           
           <h1 class="text-3xl md:text-4xl lg:text-5xl font-light">
               <i class="fas fa-store mr-3"></i>Vendor Management System
           </h1>
           
           <div class="w-32"></div> <!-- Spacer to center the title -->
       </div>
       <p class="text-blue-100 text-lg md:text-xl opacity-90">
           Create and manage vendor profiles with secure data
       </p>
   </div>
</div>


            <div class="p-4 md:p-6 lg:p-8">
                <!-- Security Notice -->
                <div class="bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-2xl p-4 md:p-6 mb-6 md:mb-8 animate-slide-up">
                    <h3 class="text-lg md:text-xl font-semibold mb-2 flex items-center">
                        <i class="fas fa-shield-alt mr-3"></i>Security Notice
                    </h3>
                    <p class="text-pink-100 text-sm md:text-base">
                        All sensitive data including bank information, identity documents, and passwords are handled securely. 
                        Bank details are masked, passwords are hashed, and GST/PAN validation is applied automatically.
                    </p>
                </div>

                <!-- Main Form -->
                <div class="bg-gray-50 rounded-2xl p-4 md:p-6 lg:p-8 mb-6 md:mb-8 animate-slide-up">
                    <form id="vendorForm" class="space-y-8 md:space-y-12">
                        
                        <!-- Basic Information Section -->
                        <section class="space-y-4 md:space-y-6">
                            <h2 class="text-xl md:text-2xl font-semibold text-gray-800 pb-3 border-b-4 border-blue-500 flex items-center">
                                <i class="fas fa-user mr-3 text-blue-500"></i>Basic Information
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6">
                                <div class="space-y-2">
                                    <label for="name" class="block text-sm font-medium text-gray-700">
                                        Vendor Name <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="name" name="name" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="email" class="block text-sm font-medium text-gray-700">
                                        Email <span class="text-red-500">*</span>
                                    </label>
                                    <input type="email" id="email" name="email" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="phone" class="block text-sm font-medium text-gray-700">
                                        Phone Number <span class="text-red-500">*</span>
                                    </label>
                                    <input type="tel" id="phone" name="phone" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2 md:col-span-2 xl:col-span-1">
                                    <label for="password" class="block text-sm font-medium text-gray-700">
                                        Password (if login enabled)
                                    </label>
                                    <input type="password" id="password" name="password"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white">
                                </div>
                            </div>
                        </section>

                        <!-- Business Information Section -->
                        <section class="space-y-4 md:space-y-6">
                            <h2 class="text-xl md:text-2xl font-semibold text-gray-800 pb-3 border-b-4 border-green-500 flex items-center">
                                <i class="fas fa-building mr-3 text-green-500"></i>Business Information
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6">
                                <div class="space-y-2">
                                    <label for="companyName" class="block text-sm font-medium text-gray-700">
                                        Company Name <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="companyName" name="companyName" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="gstNumber" class="block text-sm font-medium text-gray-700">GST Number</label>
                                    <input type="text" id="gstNumber" name="gstNumber" 
                                           pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}" 
                                           placeholder="22AAAAA0000A1Z5"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="panNumber" class="block text-sm font-medium text-gray-700">PAN Number</label>
                                    <input type="text" id="panNumber" name="panNumber" 
                                           pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" 
                                           placeholder="ABCDE1234F"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="businessType" class="block text-sm font-medium text-gray-700">Business Type</label>
                                    <select id="businessType" name="businessType"
                                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white">
                                        <option value="">Select Business Type</option>
                                        <option value="sole_proprietorship">Sole Proprietorship</option>
                                        <option value="partnership">Partnership</option>
                                        <option value="llp">Limited Liability Partnership</option>
                                        <option value="private_limited">Private Limited Company</option>
                                        <option value="public_limited">Public Limited Company</option>
                                    </select>
                                </div>
                                <div class="space-y-2 md:col-span-2">
                                    <label for="registrationCertificateUrl" class="block text-sm font-medium text-gray-700">
                                        Registration Certificate URL (Optional)
                                    </label>
                                    <input type="url" id="registrationCertificateUrl" name="registrationCertificateUrl"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white">
                                </div>
                            </div>
                        </section>

                        <!-- Address Information Section -->
                        <section class="space-y-4 md:space-y-6">
                            <h2 class="text-xl md:text-2xl font-semibold text-gray-800 pb-3 border-b-4 border-purple-500 flex items-center">
                                <i class="fas fa-map-marker-alt mr-3 text-purple-500"></i>Address Information
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6">
                                <div class="space-y-2 md:col-span-2">
                                    <label for="addressLine1" class="block text-sm font-medium text-gray-700">
                                        Address Line 1 <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="addressLine1" name="addressLine1" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="addressLine2" class="block text-sm font-medium text-gray-700">Address Line 2</label>
                                    <input type="text" id="addressLine2" name="addressLine2"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="city" class="block text-sm font-medium text-gray-700">
                                        City <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="city" name="city" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="state" class="block text-sm font-medium text-gray-700">
                                        State <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="state" name="state" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="postalCode" class="block text-sm font-medium text-gray-700">
                                        Postal Code <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="postalCode" name="postalCode" required
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="country" class="block text-sm font-medium text-gray-700">
                                        Country <span class="text-red-500">*</span>
                                    </label>
                                    <select id="country" name="country" required
                                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                        <option value="">Select Country</option>
                                        <option value="IN" selected>India</option>
                                        <option value="US">United States</option>
                                        <option value="UK">United Kingdom</option>
                                        <option value="CA">Canada</option>
                                        <option value="AU">Australia</option>
                                    </select>
                                </div>
                                <div class="space-y-2">
                                    <label for="latitude" class="block text-sm font-medium text-gray-700">Latitude</label>
                                    <input type="number" id="latitude" name="latitude" step="any" placeholder="12.9716"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="longitude" class="block text-sm font-medium text-gray-700">Longitude</label>
                                    <input type="number" id="longitude" name="longitude" step="any" placeholder="77.5946"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <button type="button" onclick="getCurrentLocation()" 
                                            class="w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 focus:ring-4 focus:ring-purple-100 transition-all duration-200 transform hover:scale-105 flex items-center justify-center">
                                        <i class="fas fa-map-marker-alt mr-2"></i>Get Current Location
                                    </button>
                                </div>
                            </div>
                        </section>

                        <!-- Payment Information Section -->
                        <section class="space-y-4 md:space-y-6">
                            <h2 class="text-xl md:text-2xl font-semibold text-gray-800 pb-3 border-b-4 border-yellow-500 flex items-center">
                                <i class="fas fa-university mr-3 text-yellow-500"></i>Payment Information
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6">
                                <div class="space-y-2">
                                    <label for="bankAccountNumber" class="block text-sm font-medium text-gray-700">Bank Account Number</label>
                                    <input type="text" id="bankAccountNumber" name="bankAccountNumber"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="ifscCode" class="block text-sm font-medium text-gray-700">IFSC Code</label>
                                    <input type="text" id="ifscCode" name="ifscCode" 
                                           pattern="[A-Z]{4}0[A-Z0-9]{6}" 
                                           placeholder="SBIN0001234"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="upiId" class="block text-sm font-medium text-gray-700">UPI ID</label>
                                    <input type="text" id="upiId" name="upiId" placeholder="vendor@paytm"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center space-x-3 pt-8">
                                        <input type="checkbox" id="paymentVerified" name="paymentVerified"
                                               class="w-5 h-5 text-yellow-500 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500 focus:ring-2">
                                        <label for="paymentVerified" class="text-sm font-medium text-gray-700">
                                            Payment Details Verified
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Status and Settings Section -->
                        <section class="space-y-4 md:space-y-6">
                            <h2 class="text-xl md:text-2xl font-semibold text-gray-800 pb-3 border-b-4 border-red-500 flex items-center">
                                <i class="fas fa-flag mr-3 text-red-500"></i>Status & Settings
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 md:gap-6">
                                <div class="space-y-2">
                                    <div class="flex items-center space-x-3">
                                        <input type="checkbox" id="isActive" name="isActive" checked
                                               class="w-5 h-5 text-red-500 bg-gray-100 border-gray-300 rounded focus:ring-red-500 focus:ring-2">
                                        <label for="isActive" class="text-sm font-medium text-gray-700">Active Vendor</label>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center space-x-3">
                                        <input type="checkbox" id="isVerified" name="isVerified"
                                               class="w-5 h-5 text-red-500 bg-gray-100 border-gray-300 rounded focus:ring-red-500 focus:ring-2">
                                        <label for="isVerified" class="text-sm font-medium text-gray-700">KYC/Business Verified</label>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <label for="rating" class="block text-sm font-medium text-gray-700">Rating (0-5)</label>
                                    <input type="number" id="rating" name="rating" min="0" max="5" step="0.1" value="0"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="totalProducts" class="block text-sm font-medium text-gray-700">Total Products</label>
                                    <input type="number" id="totalProducts" name="totalProducts" min="0" value="0"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white">
                                </div>
                            </div>
                        </section>

                        <!-- Additional Information Section -->
                        <section class="space-y-4 md:space-y-6">
                            <h2 class="text-xl md:text-2xl font-semibold text-gray-800 pb-3 border-b-4 border-indigo-500 flex items-center">
                                <i class="fas fa-plus-circle mr-3 text-indigo-500"></i>Additional Information (Optional)
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6">
                                <div class="space-y-2">
                                    <label for="profileImageUrl" class="block text-sm font-medium text-gray-700">Profile Image URL</label>
                                    <input type="url" id="profileImageUrl" name="profileImageUrl"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="supportContact" class="block text-sm font-medium text-gray-700">Support Contact</label>
                                    <input type="text" id="supportContact" name="supportContact"
                                           class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white">
                                </div>
                                <div class="space-y-2">
                                    <label for="preferredCourierService" class="block text-sm font-medium text-gray-700">Preferred Courier Service</label>
                                    <select id="preferredCourierService" name="preferredCourierService"
                                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white">
                                        <option value="">Select Courier</option>
                                        <option value="bluedart">Blue Dart</option>
                                        <option value="dhl">DHL</option>
                                        <option value="fedex">FedEx</option>
                                        <option value="dtdc">DTDC</option>
                                        <option value="indiapost">India Post</option>
                                    </select>
                                </div>
                                <div class="space-y-2 md:col-span-2 xl:col-span-1">
                                    <label for="deliveryZones" class="block text-sm font-medium text-gray-700">Delivery Zones (comma-separated)</label>
                                    <textarea id="deliveryZones" name="deliveryZones" rows="3" 
                                              placeholder="Trivandrum District"
                                              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white resize-none"></textarea>
                                </div>
                                <div class="space-y-2 md:col-span-2">
                                    <label for="warehouseLocations" class="block text-sm font-medium text-gray-700">Warehouse Locations</label>
                                    <textarea id="warehouseLocations" name="warehouseLocations" rows="3"
                                              placeholder="Main Warehouse: Address 1, Secondary: Address 2"
                                              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white resize-none"></textarea>
                                </div>
                                <div class="space-y-2 md:col-span-2 xl:col-span-3">
                                    <label for="notes" class="block text-sm font-medium text-gray-700">Admin Notes</label>
                                    <textarea id="notes" name="notes" rows="3"
                                              placeholder="Internal notes or remarks"
                                              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white resize-none"></textarea>
                                </div>
                            </div>
                        </section>

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row gap-4 justify-center pt-6">
                            <button type="submit" 
                                    class="px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 focus:ring-4 focus:ring-blue-100 transition-all duration-200 transform hover:scale-105 flex items-center justify-center font-semibold text-lg shadow-lg">
                                <i class="fas fa-save mr-3"></i>Create Vendor
                            </button>
                            <button type="button" onclick="clearForm()"
                                    class="px-8 py-4 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 focus:ring-4 focus:ring-gray-100 transition-all duration-200 transform hover:scale-105 flex items-center justify-center font-semibold text-lg shadow-lg">
                                <i class="fas fa-eraser mr-3"></i>Clear Form
                            </button>
                            <button type="button" onclick="loadVendors()"
                                    class="px-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 focus:ring-4 focus:ring-orange-100 transition-all duration-200 transform hover:scale-105 flex items-center justify-center font-semibold text-lg shadow-lg">
                                <i class="fas fa-list mr-3"></i>Load Vendors
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Vendor List Section -->
                <div id="vendorList" class="hidden bg-white rounded-2xl p-4 md:p-6 lg:p-8 animate-slide-up">
                    <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 pb-4 border-b-4 border-green-500 flex items-center mb-6">
                        <i class="fas fa-users mr-3 text-green-500"></i>Existing Vendors
                    </h2>
                    <div id="vendorCards" class="space-y-4 md:space-y-6"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>

        // Initialize Firebase (uncomment when you have your config)
        // firebase.initializeApp(firebaseConfig);
        // const db = firebase.firestore();

        let nextVendorId = 1;
        let vendors = [];
        let editingVendorId = null;

        // Mock Firebase functions for demo purposes
        const mockDb = {
            collection: (name) => ({
                add: (data) => {
                    const vendor = { id: nextVendorId.toString(), ...data };
                    vendors.push(vendor);
                    nextVendorId++;
                    return Promise.resolve({ id: vendor.id });
                },
                doc: (id) => ({
                    set: (data) => {
                        const index = vendors.findIndex(v => v.id === id);
                        if (index !== -1) {
                            vendors[index] = { id, ...data };
                        }
                        return Promise.resolve();
                    },
                    get: () => {
                        const vendor = vendors.find(v => v.id === id);
                        return Promise.resolve({
                            exists: !!vendor,
                            data: () => vendor
                        });
                    }
                }),
                get: () => {
                    return Promise.resolve({
                        docs: vendors.map(v => ({
                            id: v.id,
                            data: () => v
                        }))
                    });
                }
            })
        };

        function showNotification(message, type = 'success') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
            notification.className = `${bgColor} text-white px-6 py-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 flex items-center space-x-3 max-w-sm`;
            
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <span class="font-medium">${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-auto text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => notification.classList.remove('translate-x-full'), 100);
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        function hashPassword(password) {
            // Simple hash function for demo - use proper hashing in production
            return btoa(password + 'salt123');
        }

        function maskBankAccount(accountNumber) {
            if (!accountNumber) return '';
            return accountNumber.slice(0, 4) + '*'.repeat(accountNumber.length - 4);
        }

        function validateGST(gstNumber) {
            const gstRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
            return gstRegex.test(gstNumber);
        }

        function validatePAN(panNumber) {
            const panRegex = /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
            return panRegex.test(panNumber);
        }

        function validateIFSC(ifscCode) {
            const ifscRegex = /^[A-Z]{4}0[A-Z0-9]{6}$/;
            return ifscRegex.test(ifscCode);
        }

        function clearForm() {
            document.getElementById('vendorForm').reset();
            editingVendorId = null;
            document.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save mr-3"></i>Create Vendor';
            
            // Reset form validation styles
            document.querySelectorAll('input, select, textarea').forEach(element => {
                element.classList.remove('border-red-500', 'border-green-500');
                element.classList.add('border-gray-200');
            });
        }

        function populateForm(vendor) {
            const form = document.getElementById('vendorForm');
            Object.keys(vendor).forEach(key => {
                const element = form.elements[key];
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = vendor[key];
                    } else if (key === 'locationCoordinates' && vendor[key]) {
                        form.elements['latitude'].value = vendor[key].lat || '';
                        form.elements['longitude'].value = vendor[key].lng || '';
                    } else if (key !== 'passwordHash' && key !== 'bankAccountNumber') {
                        element.value = vendor[key] || '';
                    }
                }
            });
            
            editingVendorId = vendor.vendorId;
            document.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-edit mr-3"></i>Update Vendor';
        }

        async function loadVendors() {
            const vendorList = document.getElementById('vendorList');
            const vendorCards = document.getElementById('vendorCards');
            
            vendorCards.innerHTML = `
                <div class="flex justify-center items-center py-12">
                    <div class="text-center">
                        <i class="fas fa-spinner animate-spin text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-500 text-lg">Loading vendors...</p>
                    </div>
                </div>
            `;
            vendorList.classList.remove('hidden');
            
            try {
                // Replace with actual Firebase call
                const snapshot = await mockDb.collection('vendors').get();
                
                if (snapshot.docs.length === 0) {
                    vendorCards.innerHTML = `
                        <div class="text-center py-12">
                            <i class="fas fa-store text-6xl text-gray-300 mb-4"></i>
                            <p class="text-gray-500 text-xl">No vendors found</p>
                            <p class="text-gray-400">Create your first vendor above!</p>
                        </div>
                    `;
                    return;
                }
                
                vendorCards.innerHTML = '';
                snapshot.docs.forEach(doc => {
                    const vendor = doc.data();
                    const vendorCard = createVendorCard(vendor);
                    vendorCards.appendChild(vendorCard);
                });
                
            } catch (error) {
                console.error('Error loading vendors:', error);
                vendorCards.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-6xl text-red-300 mb-4"></i>
                        <p class="text-red-500 text-xl">Error loading vendors</p>
                        <p class="text-red-400">Please try again later</p>
                    </div>
                `;
            }
        }

        function createVendorCard(vendor) {
            const card = document.createElement('div');
            card.className = 'bg-gray-50 rounded-2xl p-6 border-l-4 border-blue-500 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1';
            
            card.innerHTML = `
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4">
                    <div class="mb-4 lg:mb-0">
                        <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-2">${vendor.name || 'N/A'}</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-3 py-1 rounded-full text-sm font-medium ${vendor.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                <i class="fas fa-circle text-xs mr-1"></i>${vendor.isActive ? 'Active' : 'Inactive'}
                            </span>
                            <span class="px-3 py-1 rounded-full text-sm font-medium ${vendor.isVerified ? 'bg-blue-100 text-blue-800' : 'bg-yellow-100 text-yellow-800'}">
                                <i class="fas fa-${vendor.isVerified ? 'check-circle' : 'clock'} text-xs mr-1"></i>${vendor.isVerified ? 'Verified' : 'Unverified'}
                            </span>
                        </div>
                    </div>
                    <button onclick="editVendor('${vendor.vendorId}')" 
                            class="px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 focus:ring-4 focus:ring-green-100 transition-all duration-200 transform hover:scale-105 flex items-center justify-center font-medium">
                        <i class="fas fa-edit mr-2"></i>Edit Vendor
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">Vendor ID</p>
                        <p class="text-gray-800 font-mono">${vendor.vendorId}</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">Email</p>
                        <p class="text-gray-800 truncate">${vendor.email || 'N/A'}</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">Phone</p>
                        <p class="text-gray-800">${vendor.phone || 'N/A'}</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">Company</p>
                        <p class="text-gray-800 truncate">${vendor.companyName || 'N/A'}</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">GST Number</p>
                        <p class="text-gray-800 font-mono">${vendor.gstNumber || 'N/A'}</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">City</p>
                        <p class="text-gray-800">${vendor.city || 'N/A'}</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">Rating</p>
                        <div class="flex items-center space-x-1">
                            <span class="text-yellow-500 font-bold">${vendor.rating || 0}</span>
                            <div class="flex text-yellow-400">
                                ${Array.from({length: 5}, (_, i) => 
                                    `<i class="fas fa-star ${i < Math.floor(vendor.rating || 0) ? '' : 'text-gray-300'}"></i>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="space-y-1">
                        <p class="text-gray-500 font-medium">Products</p>
                        <p class="text-gray-800 font-semibold">${vendor.totalProducts || 0}</p>
                    </div>
                </div>
            `;
            
            return card;
        }

        async function editVendor(vendorId) {
            try {
                // Replace with actual Firebase call
                const doc = await mockDb.collection('vendors').doc(vendorId).get();
                if (doc.exists) {
                    const vendor = doc.data();
                    populateForm(vendor);
                    document.querySelector('.bg-gray-50.rounded-2xl').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                    showNotification('Vendor loaded for editing');
                }
            } catch (error) {
                console.error('Error loading vendor:', error);
                showNotification('Error loading vendor for editing', 'error');
            }
        }

        async function getCurrentLocation() {
            if (navigator.geolocation) {
                try {
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject);
                    });
                    
                    document.getElementById('latitude').value = position.coords.latitude.toFixed(6);
                    document.getElementById('longitude').value = position.coords.longitude.toFixed(6);
                    showNotification('Location coordinates filled automatically!');
                } catch (error) {
                    console.error('Error getting location:', error);
                    showNotification('Unable to get current location', 'error');
                }
            } else {
                showNotification('Geolocation is not supported by this browser', 'error');
            }
        }

        // Form submission handler
        document.getElementById('vendorForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const vendorData = {};
            
            // Process form data
            for (let [key, value] of formData.entries()) {
                if (key === 'password' && value) {
                    vendorData.passwordHash = hashPassword(value);
                } else if (key === 'bankAccountNumber' && value) {
                    vendorData.bankAccountNumber = maskBankAccount(value);
                } else if (key === 'deliveryZones' && value) {
                    vendorData.deliveryZones = value.split(',').map(zone => zone.trim());
                } else if (value !== '') {
                    vendorData[key] = value;
                }
            }
            
            // Handle checkboxes
            vendorData.isActive = formData.has('isActive');
            vendorData.isVerified = formData.has('isVerified');
            vendorData.paymentVerified = formData.has('paymentVerified');
            
            // Handle location coordinates
            const latitude = formData.get('latitude');
            const longitude = formData.get('longitude');
            if (latitude && longitude) {
                vendorData.locationCoordinates = {
                    lat: parseFloat(latitude),
                    lng: parseFloat(longitude)
                };
            }
            
            // Convert numeric fields
            if (vendorData.rating) vendorData.rating = parseFloat(vendorData.rating);
            if (vendorData.totalProducts) vendorData.totalProducts = parseInt(vendorData.totalProducts);
            
            // Validation
            if (vendorData.gstNumber && !validateGST(vendorData.gstNumber)) {
                showNotification('Invalid GST number format', 'error');
                document.getElementById('gstNumber').classList.add('border-red-500');
                return;
            }
            
            if (vendorData.panNumber && !validatePAN(vendorData.panNumber)) {
                showNotification('Invalid PAN number format', 'error');
                document.getElementById('panNumber').classList.add('border-red-500');
                return;
            }
            
            if (vendorData.ifscCode && !validateIFSC(vendorData.ifscCode)) {
                showNotification('Invalid IFSC code format', 'error');
                document.getElementById('ifscCode').classList.add('border-red-500');
                return;
            }
            
            // Add timestamps
            const now = new Date().toISOString();
            if (editingVendorId) {
                vendorData.updatedAt = now;
                vendorData.vendorId = editingVendorId;
            } else {
                vendorData.createdAt = now;
                vendorData.updatedAt = now;
                vendorData.vendorId = nextVendorId.toString();
            }
            
            try {
                if (editingVendorId) {
                    // Update existing vendor
                    await mockDb.collection('vendors').doc(editingVendorId).set(vendorData);
                    showNotification('Vendor updated successfully!');
                } else {
                    // Create new vendor
                    await mockDb.collection('vendors').add(vendorData);
                    showNotification('Vendor created successfully!');
                }
                
                clearForm();
                
                // Refresh vendor list if it's visible
                if (!document.getElementById('vendorList').classList.contains('hidden')) {
                    loadVendors();
                }
                
            } catch (error) {
                console.error('Error saving vendor:', error);
                showNotification('Error saving vendor. Please try again.', 'error');
            }
        });
        
        // Input formatting and validation
        document.getElementById('gstNumber').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
            if (value.length > 15) value = value.substring(0, 15);
            e.target.value = value;
            
            if (value && validateGST(value)) {
                e.target.classList.remove('border-red-500');
                e.target.classList.add('border-green-500');
            } else if (value) {
                e.target.classList.remove('border-green-500');
                e.target.classList.add('border-red-500');
            } else {
                e.target.classList.remove('border-red-500', 'border-green-500');
                e.target.classList.add('border-gray-200');
            }
        });
        
        document.getElementById('panNumber').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
            if (value.length > 10) value = value.substring(0, 10);
            e.target.value = value;
            
            if (value && validatePAN(value)) {
                e.target.classList.remove('border-red-500');
                e.target.classList.add('border-green-500');
            } else if (value) {
                e.target.classList.remove('border-green-500');
                e.target.classList.add('border-red-500');
            } else {
                e.target.classList.remove('border-red-500', 'border-green-500');
                e.target.classList.add('border-gray-200');
            }
        });
        
        document.getElementById('ifscCode').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
            if (value.length > 11) value = value.substring(0, 11);
            e.target.value = value;
            
            if (value && validateIFSC(value)) {
                e.target.classList.remove('border-red-500');
                e.target.classList.add('border-green-500');
            } else if (value) {
                e.target.classList.remove('border-green-500');
                e.target.classList.add('border-red-500');
            } else {
                e.target.classList.remove('border-red-500', 'border-green-500');
                e.target.classList.add('border-gray-200');
            }
        });
        
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9+]/g, '');
            e.target.value = value;
        });
        
        // Form validation feedback for required fields
        document.querySelectorAll('input[required]').forEach(input => {
            input.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    this.classList.remove('border-green-500');
                    this.classList.add('border-red-500');
                } else {
                    this.classList.remove('border-red-500');
                    this.classList.add('border-green-500');
                }
            });
            
            input.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.classList.remove('border-red-500');
                    this.classList.add('border-gray-200');
                }
            });
        });
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set default country to India
            document.getElementById('country').value = 'IN';
            
            // Add sample data for demo
            const sampleVendors = [
                {
                    vendorId: '1',
                    name: 'Raj Electronics',
                    email: 'raj@electronics.com',
                    phone: '+91-9876543210',
                    companyName: 'Raj Electronics Pvt Ltd',
                    gstNumber: '29ABCDE1234A1Z5',
                    panNumber: 'ABCDE1234F',
                    businessType: 'private_limited',
                    addressLine1: '123 Main Street',
                    city: 'Mumbai',
                    state: 'Maharashtra',
                    postalCode: '400001',
                    country: 'IN',
                    isActive: true,
                    isVerified: true,
                    rating: 4.5,
                    totalProducts: 150,
                    createdAt: '2024-01-15T10:30:00Z',
                    updatedAt: '2024-01-15T10:30:00Z'
                },
                {
                    vendorId: '2',
                    name: 'Fashion Hub',
                    email: 'contact@fashionhub.com',
                    phone: '+91-9876543211',
                    companyName: 'Fashion Hub India',
                    gstNumber: '27XYZAB5678B2C6',
                    businessType: 'partnership',
                    addressLine1: '456 Fashion Street',
                    city: 'Delhi',
                    state: 'Delhi',
                    postalCode: '110001',
                    country: 'IN',
                    isActive: true,
                    isVerified: false,
                    rating: 3.8,
                    totalProducts: 89,
                    createdAt: '2024-01-16T14:15:00Z',
                    updatedAt: '2024-01-16T14:15:00Z'
                }
            ];
            
            vendors = sampleVendors;
            nextVendorId = 3;
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                document.getElementById('vendorForm').dispatchEvent(new Event('submit'));
            }
            if (e.ctrlKey && e.key === 'r') {
                e.preventDefault();
                clearForm();
            }
        });
        
        // Auto-save functionality (saves to memory)
        function autoSave() {
            const formData = new FormData(document.getElementById('vendorForm'));
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            console.log('Auto-saving form data:', data);
        }
        
        // Auto-save every 30 seconds
        setInterval(autoSave, 30000);







//new




    </script>
</body>
</html>